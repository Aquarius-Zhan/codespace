# 老年健康助手微信小程序

## 项目概述

这是一个专为老年人设计的微信小程序，集成了菜品识别、药物识别、联系聊天和闹钟提醒等功能，旨在帮助老年人更好地管理健康生活和与家人保持联系。

## 主要功能

### 🏠 主页功能
- **八宫格布局设计**：上排4个联系人大格子，下排4个功能小格子
- **实时时钟和问候**：根据时间段显示不同问候语
- **快捷操作**：紧急呼叫、语音助手等老年人友好功能

### 💬 聊天功能
- **联系人管理**：支持添加、编辑联系人和设置紧急联系人
- **多种消息类型**：文字、图片、语音、位置消息
- **快捷回复**：预设常用回复，方便老年人快速响应
- **语音输入**：支持语音转文字功能

### 🍽️ 菜品识别
- **智能识别**：拍照识别菜品名称和营养成分
- **营养分析**：显示热量、蛋白质、碳水化合物、脂肪等
- **健康建议**：根据菜品特性提供个性化建议
- **过敏提醒**：识别常见过敏原

### 💊 药物识别
- **药物信息识别**：识别药物名称、规格、用法用量
- **用药提醒**：自动设置药物闹钟提醒
- **注意事项**：显示禁忌、副作用等重要信息
- **常用药物库**：快速访问常用药物信息

### ⏰ 闹钟管理
- **多种类型闹钟**：药物闹钟、用餐闹钟、自定义闹钟
- **重复设置**：支持按周重复设置
- **语音提醒**：闹钟触发时播放语音提醒

### 📊 识别记录
- **历史记录**：查看所有识别历史，支持搜索和筛选
- **数据统计**：显示识别次数统计
- **数据导出**：支持导出识别数据
- **云端同步**：本地存储+云端备份

## 技术特点

### 🎨 老年人友好设计
- **大字体**：最小字体16px，支持缩放
- **高对比度**：采用WCAG AA标准颜色对比度
- **简洁界面**：清晰的视觉层次和操作反馈
- **语音提示**：关键操作提供语音反馈

### 🛠️ 技术架构
- **前端框架**：微信小程序原生开发
- **UI组件库**：Vant WeUI组件库
- **数据存储**：微信本地存储 + 微信云开发
- **数据同步**：本地优先，云端备份
- **离线支持**：网络断开时自动使用本地数据

### 🔧 开发特性
- **模块化设计**：清晰的代码结构，便于维护
- **错误处理**：完善的错误处理和用户提示
- **性能优化**：懒加载、数据分页等优化措施
- **可访问性**：支持屏幕阅读器和键盘导航

## 安装部署

### 环境要求
- 微信开发者工具 v1.06.2307260 或更高版本
- 微信小程序基础库 2.24.0 或更高版本

### 部署步骤

1. **克隆项目**
```bash
git clone [项目地址]
cd wxprgrm
```

2. **安装依赖**
- 在微信开发者工具中打开项目
- 在工具栏点击"构建npm"（如果使用npm包）

3. **配置云开发**
- 在微信开发者工具中开启云开发
- 创建云环境并记录环境ID
- 修改 `app.js` 中的云环境ID：
```javascript
wx.cloud.init({
  env: 'your-env-id', // 替换为您的云环境ID
  traceUser: true
})
```

4. **配置小程序AppID**
- 修改 `project.config.json` 中的appid字段
```json
"appid": "你的小程序AppID"
```

5. **上传云函数**
- 右键点击 `cloudfunctions` 目录
- 选择"上传并部署所有云函数"

6. **配置数据库**
- 在云开发控制台创建以下集合：
  - `users` - 用户信息
  - `contacts` - 联系人数据
  - `alarms` - 闹钟数据
  - `identifyRecords` - 识别记录
  - `chatMessages` - 聊天消息

7. **预览测试**
- 在微信开发者工具中点击"预览"
- 使用微信扫描二维码在真机上测试

### 开发调试

1. **开启调试模式**
- 在微信开发者工具中开启"不校验合法域名"选项

2. **查看控制台**
- 使用Console面板查看调试信息
- 检查网络请求和本地存储

3. **模拟数据**
- 应用已内置模拟数据，无需真实AI API即可测试

## 项目结构

```
wxprgrm/
├── app.js                 # 小程序入口文件
├── app.json              # 小程序配置
├── app.wxss              # 全局样式
├── pages/                # 页面目录
│   ├── index/            # 主页
│   ├── chat/             # 聊天页面
│   ├── food-identify/    # 菜品识别
│   ├── medicine-identify/ # 药物识别
│   ├── records/          # 识别记录
│   └── alarms/           # 闹钟管理
├── images/               # 图片资源
├── cloudfunctions/       # 云函数
└── README.md            # 项目说明
```

## 核心代码说明

### 数据同步策略
- **本地优先**：所有数据先保存到本地存储
- **云端备份**：网络可用时自动同步到云端
- **冲突解决**：以最新数据为准，支持手动合并

### 语音功能实现
- 使用微信内置TTS API进行语音播报
- 集成录音API支持语音输入
- 支持语音识别转文字（需要配置对应服务）

### AI识别模拟
- 内置多个菜品和药物的模拟识别结果
- 随机生成置信度和详细信息
- 预留真实AI API接入接口

## 注意事项

### 隐私保护
- 所有敏感数据仅存储在用户设备和私有云环境
- 不会向第三方服务传输用户数据
- 支持随时清除所有本地数据

### 安全提醒
- 药物识别结果仅供参考，不能替代专业医师建议
- 紧急情况请直接拨打急救电话
- 建议定期与医生沟通用药情况

### 兼容性
- 支持iOS 10.0+和Android 5.0+
- 建议在6.5英寸以上屏幕设备使用
- 支持暗黑模式和无障碍功能

## 更新日志

### v1.0.0 (2024-01-01)
- ✨ 完成核心功能开发
- 🎨 实现老年人友好UI设计
- 🔧 集成Vant WeUI组件库
- ☁️ 配置微信云开发
- 📱 支持基础数据同步

## 技术支持

如有问题或建议，请通过以下方式联系：
- 项目Issues：[项目地址/issues]
- 邮箱：[联系邮箱]

## 开源许可

本项目采用 MIT 许可证，详情请参阅 [LICENSE](LICENSE) 文件。